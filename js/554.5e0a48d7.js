"use strict";(self["webpackChunktest_task_app"]=self["webpackChunktest_task_app"]||[]).push([[554],{554:function(t,n,o){o.r(n),o.d(n,{default:function(){return _}});var s=o(641);function r(t,n,o,r,e,u){const i=(0,s.g2)("BitcoinTransactions");return(0,s.uX)(),(0,s.Wv)(i)}var e=o(33);const u=(0,s.Lk)("h1",null,"Transactions",-1),i={class:"toolbar"};function a(t,n,o,r,a,c){const l=(0,s.g2)("ActionButton"),p=(0,s.g2)("TransactionsTable");return(0,s.uX)(),(0,s.CE)(s.FK,null,[u,(0,s.Lk)("div",i,[(0,s.bF)(l,{actionType:"start",onAction:c.startSubscription},null,8,["onAction"]),(0,s.bF)(l,{actionType:"stop",onAction:c.stopSubscription},null,8,["onAction"]),(0,s.bF)(l,{actionType:"reset",onAction:c.resetTransactions},null,8,["onAction"])]),(0,s.Lk)("h3",null,"Sum: "+(0,e.v_)(a.totalValue.toFixed(8))+" BTC",1),(0,s.bF)(p,{transactions:a.transactions},null,8,["transactions"])],64)}var c=o(775);const l={class:"transactions-table"},p=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"From"),(0,s.Lk)("th",null,"To"),(0,s.Lk)("th",null,"Sum")])],-1);function d(t,n,o,r,u,i){return(0,s.uX)(),(0,s.CE)("table",l,[p,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.transactions,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.hash},[(0,s.Lk)("td",null,(0,e.v_)(i.getFromAddr(t.x)),1),(0,s.Lk)("td",null,(0,e.v_)(i.getToAddr(t.x)),1),(0,s.Lk)("td",null,(0,e.v_)(i.getValue(t.x))+" BTC",1)])))),128))])])}var b={props:{transactions:Array},methods:{getValue(t){return t.out.map((t=>t.value)).reduce(((t,n)=>t+n),0)/1e8},getFromAddr(t){return t.inputs.map((t=>t.prev_out.addr)).join("\n")},getToAddr(t){return t.out.map((t=>t.addr)).join("\n")}}},h=o(262);const T=(0,h.A)(b,[["render",d]]);var f=T;function k(t,n,o,r,u,i){return(0,s.uX)(),(0,s.CE)("button",{class:(0,e.C4)("button-basic "+i.buttonClass),onClick:n[0]||(n[0]=(...t)=>i.emitAction&&i.emitAction(...t))},(0,e.v_)(i.buttonText),3)}var m={props:{actionType:{type:String,required:!0}},computed:{buttonText(){return c.P9[this.actionType]||"Action"},buttonClass(){return`button-${this.actionType}`}},methods:{emitAction(){this.$emit("action",this.actionType)}}};const A=(0,h.A)(m,[["render",k]]);var v=A,g={data(){return{transactions:[],totalValue:0,ws:null}},components:{ActionButton:v,TransactionsTable:f},methods:{getTotalValue(t){return t.reduce(((t,n)=>t+n.value),0)/c.ut},startSubscription(){this.ws=new WebSocket(c.Tb),this.ws.onopen=()=>{this.ws.send(JSON.stringify({op:"unconfirmed_sub"}))},this.ws.onmessage=t=>{const n=JSON.parse(t.data);"utx"===n.op&&(this.transactions.push(n),this.totalValue+=this.getTotalValue(n.x.out))},this.ws.onerror=t=>{console.error("WebSocket error: ",t)}},stopSubscription(){this.ws&&(this.ws.send(JSON.stringify({op:"unconfirmed_unsub"})),this.ws.close())},resetTransactions(){this.transactions=[],this.totalValue=0}},beforeDestroy(){this.stopSubscription()}};const y=(0,h.A)(g,[["render",a]]);var S=y,w={components:{BitcoinTransactions:S}};const C=(0,h.A)(w,[["render",r]]);var _=C},775:function(t,n,o){o.d(n,{Ey:function(){return s},P9:function(){return l},Pb:function(){return i},Tb:function(){return a},Ui:function(){return u},YZ:function(){return e},l_:function(){return r},ut:function(){return c}});const s=10,r=20,e=20,u=300,i=100,a="wss://ws.blockchain.info/inv",c=1e8,l={start:"Start",stop:"Stop",reset:"Reset"}}}]);
//# sourceMappingURL=554.5e0a48d7.js.map