{"version":3,"file":"js/554.5e0a48d7.js","mappings":"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","sources":["webpack://test-task-app/./src/views/BitcoinsView.vue","webpack://test-task-app/./src/components/BitcoinTransactions.vue","webpack://test-task-app/./src/components/TransactionsTable.vue","webpack://test-task-app/./src/components/TransactionsTable.vue?8ccb","webpack://test-task-app/./src/components/ActionButton.vue","webpack://test-task-app/./src/components/ActionButton.vue?8ad0","webpack://test-task-app/./src/components/BitcoinTransactions.vue?4bae","webpack://test-task-app/./src/views/BitcoinsView.vue?696a","webpack://test-task-app/./src/utils/constants.js"],"sourcesContent":["<template>\n  <BitcoinTransactions />\n</template>\n\n<script>\nimport BitcoinTransactions from '@/components/BitcoinTransactions.vue'\nexport default {\n  components: {\n    BitcoinTransactions\n  }\n}\n</script>\n\n<style lang=\"scss\"></style>","<template>\n    <h1>Transactions</h1>\n\n    <div class=\"toolbar\">\n        <ActionButton actionType=\"start\" @action=\"startSubscription\" />\n        <ActionButton actionType=\"stop\" @action=\"stopSubscription\" />\n        <ActionButton actionType=\"reset\" @action=\"resetTransactions\" />\n    </div>\n\n    <h3>Sum: {{ totalValue.toFixed(8) }} BTC</h3>\n\n    <TransactionsTable :transactions=\"transactions\" />\n\n</template>\n\n<script>\nimport { bitcoinValue, websocketURL } from '@/utils/constants';\nimport TransactionsTable from '@/components/TransactionsTable.vue';\nimport ActionButton from '@/components/ActionButton.vue'\nexport default {\n    data() {\n        return {\n            transactions: [],\n            totalValue: 0,\n            ws: null,\n        };\n    },\n    components: {\n        ActionButton,\n        TransactionsTable\n    },\n    methods: {\n        getTotalValue(outputs) {\n            return outputs.reduce((sum, output) => sum + output.value, 0) / bitcoinValue;\n        },\n        startSubscription() {\n            this.ws = new WebSocket(websocketURL);\n\n            this.ws.onopen = () => {\n                this.ws.send(JSON.stringify({ \"op\": \"unconfirmed_sub\" }));\n            };\n\n            this.ws.onmessage = (message) => {\n                const data = JSON.parse(message.data);\n                if (data.op === 'utx') {\n                    this.transactions.push(data);\n                    this.totalValue += this.getTotalValue(data.x.out);\n                }\n            };\n\n            this.ws.onerror = (error) => {\n                console.error('WebSocket error: ', error);\n            };\n\n        },\n        stopSubscription() {\n            if (this.ws) {\n                this.ws.send(JSON.stringify({ \"op\": \"unconfirmed_unsub\" }));\n                this.ws.close();\n            }\n        },\n        resetTransactions() {\n            this.transactions = [];\n            this.totalValue = 0;\n        }\n    },\n    beforeDestroy() {\n        this.stopSubscription();\n    }\n};\n</script>\n\n\n<style lang=\"scss\">\n\n\n.toolbar {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 40px;\n    margin-bottom: 20px;\n\n}\n</style>","<template>\n    <table class=\"transactions-table\">\n        <thead>\n            <tr>\n                <th>From</th>\n                <th>To</th>\n                <th>Sum</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"transaction in transactions\" :key=\"transaction.hash\">\n                <td>{{ getFromAddr(transaction.x) }}</td>\n                <td>{{ getToAddr(transaction.x) }}</td>\n                <td>{{ getValue(transaction.x) }} BTC</td>\n            </tr>\n        </tbody>\n    </table>\n</template>\n\n<script>\nexport default {\n    props: {\n        transactions: Array\n    },\n    methods: {\n        getValue(x) {\n            return x.out.map((input) => input.value).reduce((sum, output) => sum + output, 0) / 100000000;\n        },\n        getFromAddr(x) {\n            return x.inputs.map((input) => input.prev_out.addr).join('\\n');\n        },\n        getToAddr(x) {\n            return x.out.map((output) => output.addr).join('\\n');\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\">\n.transactions-table {\n    width: 100%;\n    border-collapse: collapse;\n\n    th {\n        text-align: center;\n    }\n\n    th,\n    td {\n        border: 1px solid #ddd;\n        padding: 8px;\n    }\n}\n</style>","import { render } from \"./TransactionsTable.vue?vue&type=template&id=9a1d6422\"\nimport script from \"./TransactionsTable.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionsTable.vue?vue&type=script&lang=js\"\n\nimport \"./TransactionsTable.vue?vue&type=style&index=0&id=9a1d6422&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <button :class=\"'button-basic' + ' ' + buttonClass\" @click=\"emitAction\">{{ buttonText }}</button>\n</template>\n\n<script>\nimport { actionButtonNames } from '@/utils/constants';\n\nexport default {\n    props: {\n        actionType: {\n            type: String,\n            required: true\n        }\n    },\n    computed: {\n        buttonText() {\n            return actionButtonNames[this.actionType] || 'Action';\n        },\n        buttonClass() {\n            return `button-${this.actionType}`;\n        }\n    },\n    methods: {\n        emitAction() {\n            this.$emit('action', this.actionType);\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.button-basic {\n    outline: none;\n    border: 1px solid transparent;\n    padding: 12px 36px;\n    border-radius: 8px;\n    color: white;\n    transition: all 0.3s;\n    cursor: pointer;\n}\n\n.button-start {\n    background-color: green;\n\n    &:hover {\n        color: green;\n        border: 1px solid green;\n        background-color: white\n    }\n}\n\n.button-stop {\n    background-color: red;\n\n    &:hover {\n        color: red;\n        border: 1px solid red;\n        background-color: white\n    }\n}\n\n.button-reset {\n    background-color: orange;\n\n    &:hover {\n        color: orange;\n        border: 1px solid orange;\n        background-color: white\n    }\n}\n</style>","import { render } from \"./ActionButton.vue?vue&type=template&id=5b48eae5\"\nimport script from \"./ActionButton.vue?vue&type=script&lang=js\"\nexport * from \"./ActionButton.vue?vue&type=script&lang=js\"\n\nimport \"./ActionButton.vue?vue&type=style&index=0&id=5b48eae5&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./BitcoinTransactions.vue?vue&type=template&id=3c352a24\"\nimport script from \"./BitcoinTransactions.vue?vue&type=script&lang=js\"\nexport * from \"./BitcoinTransactions.vue?vue&type=script&lang=js\"\n\nimport \"./BitcoinTransactions.vue?vue&type=style&index=0&id=3c352a24&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./BitcoinsView.vue?vue&type=template&id=58f2cd63\"\nimport script from \"./BitcoinsView.vue?vue&type=script&lang=js\"\nexport * from \"./BitcoinsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export const tileIncrement = 10;\nexport const minTileWidth = 20;\nexport const minTileHeight = 20;\nexport const defaultWidth = 300;\nexport const defaultHeight = 100;\n\nexport const websocketURL = 'wss://ws.blockchain.info/inv'\nexport const bitcoinValue = 100000000;\n\nexport const actionButtonNames = {\n    start: 'Start',\n    stop: 'Stop',\n    reset: 'Reset'\n};"],"names":["class","actionType","startSubscription","stopSubscription","resetTransactions","totalValue","toFixed","transactions","transaction","key","hash","getFromAddr","x","getToAddr","getValue","props","Array","methods","out","map","input","value","reduce","sum","output","inputs","prev_out","addr","join","__exports__","buttonClass","emitAction","buttonText","type","String","required","computed","this","$emit","data","ws","components","ActionButton","TransactionsTable","getTotalValue","outputs","WebSocket","onopen","send","JSON","stringify","onmessage","message","parse","op","push","onerror","error","console","close","beforeDestroy","BitcoinTransactions","render","tileIncrement","minTileWidth","minTileHeight","defaultWidth","defaultHeight","websocketURL","bitcoinValue","actionButtonNames","start","stop","reset"],"sourceRoot":""}