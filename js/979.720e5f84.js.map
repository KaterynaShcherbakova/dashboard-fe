{"version":3,"file":"js/979.720e5f84.js","mappings":"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","sources":["webpack://test-task-app/./src/views/TilesView.vue","webpack://test-task-app/./src/components/TradingDesk.vue","webpack://test-task-app/./src/components/Tile.vue","webpack://test-task-app/./src/components/Tile.vue?3eb3","webpack://test-task-app/./src/components/TradingDesk.vue?0e2f","webpack://test-task-app/./src/views/TilesView.vue?1c40","webpack://test-task-app/./src/utils/constants.js"],"sourcesContent":["<template>\n  <Workspace />\n</template>\n\n<script>\nimport Workspace from '@/components/TradingDesk.vue';\nexport default {\n  components: {\n    Workspace\n  },\n  \n}\n</script>\n\n<style lang=\"scss\"></style>\n","<template>\n    <h1>Trading desk</h1>\n    <div class=\"trading-desk-wrapper\" ref=\"tradingDeskWrapper\">\n        <div class=\"trading-desk\" ref=\"tradingDesk\" @dragover.prevent @drop=\"handleDrop($event)\">\n            <template v-for=\"tileData in tiles\" :key=\"tileData.id\">\n                <template v-if=\"tileData.deleted\">\n                    <div class=\"return-tile-box\" :style=\"getReturnTileBoxStyle(tileData)\"\n                        @click=\"returnTileById(tileData.id)\">{{ getReturnTileBoxText(tileData) }}</div>\n                </template>\n                <template v-else>\n                    <Tile :data=\"tileData\" @drag-start=\"bringToFront(tileData); handleDragStart(tileData, $event)\"\n                        @drag-end=\"handleDragEnd(tileData)\" @click=\"bringToFront(tileData)\"\n                        @delete=\"deleteTileById(tileData.id)\" />\n                </template>\n            </template>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { tileIncrement, defaultHeight, defaultWidth } from '@/utils/constants';\nimport Tile from './Tile.vue';\nexport default {\n    components: {\n        Tile\n    },\n    data() {\n        return {\n            tiles: [],\n            topZIndex: 5,\n            nextId: 0,\n            currentTile: null,\n            dragOffsetX: 0,\n            dragOffsetY: 0,\n\n        };\n    },\n    created() {\n        this.loadTiles();\n    },\n    methods: {\n        addNewItem(x, y) {\n            const newItem = {\n                id: this.nextId++,\n                x: x,\n                y: y,\n                width: defaultWidth,\n                height: defaultHeight,\n                zIndex: 0,\n                deleted: false\n            };\n            return newItem;\n        },\n        getReturnTileBoxStyle(tileData) {\n            return {\n                left: `${tileData.x}px`,\n                top: `${tileData.y}px`,\n                zIndex: tileData.zIndex\n            };\n        },\n        defaultTiles() {\n            return [\n                this.addNewItem(10, 10),\n                this.addNewItem(320, 10),\n                this.addNewItem(630, 10),\n                this.addNewItem(10, 120),\n                this.addNewItem(320, 120),\n            ];\n        },\n\n        getReturnTileBoxText(tileData) {\n            return `Return tile ${ tileData.id } to trading desk`\n        },\n        getTradingDeskWidth() {\n            const tradingDesk = this.$refs.tradingDesk;\n            return tradingDesk ? tradingDesk.offsetWidth : 600;\n\n        },\n        getTradingDeskHeight() {\n            const tradingDesk = this.$refs.tradingDesk;\n            return tradingDesk ? tradingDesk.offsetHeight : 600;\n        },\n\n        bringToFront(tile) {\n            tile.zIndex = ++this.topZIndex;\n            this.saveTiles();\n        },\n\n        returnTileById(id) {\n            this.tiles = this.tiles.map((tile) => {\n                if (tile.id === id) {\n                    tile.deleted = false;\n                    tile.height = defaultHeight;\n                    tile.width = defaultWidth;\n                    tile.x = (this.getTradingDeskWidth() - defaultWidth) / 2\n                    tile.y = (this.getTradingDeskHeight() - defaultHeight) / 2\n\n                }\n                return tile;\n            })\n        },\n        deleteTileById(id) {\n            this.tiles = this.tiles.map((tile) => {\n                if (tile.id === id) {\n                    tile.deleted = true;\n                }\n                return tile;\n            })\n        },\n\n        valueStickedToGrid(value) {\n            return Math.round(value / tileIncrement) * tileIncrement;\n        },\n\n        handleDrop(event) {\n            if (this.currentTile) {\n                const tradingDesk = this.$refs.tradingDeskWrapper;\n                const x = event.clientX + tradingDesk.scrollLeft - this.dragOffsetX;\n                const y = event.clientY + tradingDesk.scrollTop - this.dragOffsetY;\n                this.currentTile.x = this.valueStickedToGrid(x);\n                this.currentTile.y = this.valueStickedToGrid(y);\n                this.saveTiles();\n            }\n        },\n        handleDragStart(tile, event) {\n            const tradingDesk = this.$refs.tradingDeskWrapper;\n            this.dragOffsetX = event.clientX + tradingDesk.scrollLeft - tile.x;\n            this.dragOffsetY = event.clientY + tradingDesk.scrollTop - tile.y;\n            this.currentTile = tile;\n        },\n        handleDragEnd() {\n            this.currentTile = null;\n        },\n        loadTiles() {\n            const savedTiles = localStorage.getItem('tiles');\n            const savedNextId = localStorage.getItem('next_id');\n            const savedTopZIndex = localStorage.getItem('top-z-index');\n            this.nextId = Number(savedNextId) || 0;\n            this.topZIndex = Number(savedTopZIndex) || 6;\n            this.tiles = savedTiles ? JSON.parse(savedTiles) : this.defaultTiles();\n        },\n        saveTiles() {\n            localStorage.setItem('tiles', JSON.stringify(this.tiles));\n            localStorage.setItem('next_id', this.nextId.toString());\n            localStorage.setItem('top-z-index', this.topZIndex.toString());\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.trading-desk-wrapper {\n    max-width: 100vw;\n    overflow-x: auto;\n    border: 1px solid #ccc;\n\n    .trading-desk {\n        position: relative;\n        width: 3000px;\n        height: 600px;\n\n        .return-tile-box {\n            position: absolute;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 50px;\n            width: 300px;\n            cursor: pointer;\n            background-color: lightgrey;\n            color: black;\n        }\n    }\n}\n</style>","<template>\n    <div class=\"tile\" :style=\"getTileStyle()\" draggable=\"true\" @dragstart=\"handleDragStart($event)\" @dragover.prevent\n        @dragend=\"handleDragEnd()\">\n        <header class=\"tile-header\">\n            <h4 class=\"tile-title\">{{ getTileTitle() }}</h4>\n            <button class=\"tile-button\" @click=\"$emit('delete')\">delete</button>\n        </header>\n        <div class=\"tile-resize-handle\" @mousedown=\"initResize($event)\"></div>\n    </div>\n</template>\n\n<script>\nimport { minTileWidth, minTileHeight, tileIncrement } from '@/utils/constants';\n\nexport default {\n    data() {\n        return {\n            resizeXStartPos: 0,\n            resizeYStartPos: 0,\n            startTileHeight: 0,\n            startTileWidth: 0,\n            isResizing: false\n\n        };\n    },\n    props: {\n        data: {\n            type: Object,\n            required: true\n        }\n    },\n    methods: {\n        getTileStyle() {\n            return {\n                left: `${this.data.x}px`,\n                top: `${this.data.y}px`,\n                width: `${this.data.width}px`,\n                height: `${this.data.height}px`,\n                zIndex: this.data.zIndex\n            };\n        },\n        valueStickedToGrid(value) {\n            return Math.round(value / tileIncrement) * tileIncrement;\n        },\n        getTileTitle() {\n            return `Tile ${this.data.id}`\n        },\n        handleDragStart(event) {\n            if (this.isResizing) {\n                event.preventDefault();\n                return;\n            };\n            this.$emit('drag-start', event);\n        },\n        handleDragEnd() {\n            this.$emit('drag-end');\n        },\n        initResize(event) {\n            this.isResizing = true;\n            this.resizeXStartPos = event.clientX;\n            this.resizeYStartPos = event.clientY;\n            this.startTileHeight = this.data.height;\n            this.startTileWidth = this.data.width;\n\n            window.addEventListener('mousemove', this.handleResize);\n            window.addEventListener('mouseup', this.stopResize);\n        },\n        handleResize(event) {\n            const deltaWidth = event.clientX - this.resizeXStartPos;\n            const deltaHeight = event.clientY - this.resizeYStartPos;\n            const newWidth = Math.max(minTileWidth, this.startTileWidth + deltaWidth);\n            const newHeight = Math.max(minTileHeight, this.startTileHeight + deltaHeight);\n            this.data.width = this.valueStickedToGrid(newWidth);\n            this.data.height = this.valueStickedToGrid(newHeight)\n\n        },\n        stopResize() {\n            window.removeEventListener('mousemove', this.handleResize);\n            window.removeEventListener('mouseup', this.stopResize);\n            this.isResizing = false;\n            this.$emit('stop-resize');\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.tile {\n    position: absolute;\n    background-color: #f3f3f3;\n    padding: 0;\n\n    .tile-header {\n        display: flex;\n        padding: 4px;\n        justify-content: space-between;\n        background-color: lightblue;\n\n        .tile-title {\n            margin: 0;\n            padding: 4px;\n            color: white;\n        }\n\n        .tile-button {\n            background-color: #294d87;\n            color: white;\n            outline: none;\n            border: none;\n            cursor: pointer;\n            border-radius: 4px;\n        }\n    }\n\n    .tile-resize-handle {\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        width: 15px;\n        height: 15px;\n        background-color: #294d87;\n        cursor: se-resize;\n    }\n}\n</style>","import { render } from \"./Tile.vue?vue&type=template&id=02b2f28c\"\nimport script from \"./Tile.vue?vue&type=script&lang=js\"\nexport * from \"./Tile.vue?vue&type=script&lang=js\"\n\nimport \"./Tile.vue?vue&type=style&index=0&id=02b2f28c&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TradingDesk.vue?vue&type=template&id=f8eaffbc\"\nimport script from \"./TradingDesk.vue?vue&type=script&lang=js\"\nexport * from \"./TradingDesk.vue?vue&type=script&lang=js\"\n\nimport \"./TradingDesk.vue?vue&type=style&index=0&id=f8eaffbc&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TilesView.vue?vue&type=template&id=74801b8f\"\nimport script from \"./TilesView.vue?vue&type=script&lang=js\"\nexport * from \"./TilesView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export const tileIncrement = 10;\nexport const minTileWidth = 20;\nexport const minTileHeight = 20;\nexport const defaultWidth = 300;\nexport const defaultHeight = 100;\n\nexport const websocketURL = 'wss://ws.blockchain.info/inv'\nexport const bitcoinValue = 100000000;\n\nexport const actionButtonNames = {\n    start: 'Start',\n    stop: 'Stop',\n    reset: 'Reset'\n};"],"names":["class","ref","handleDrop","$event","tiles","tileData","id","style","getReturnTileBoxStyle","returnTileById","getReturnTileBoxText","data","bringToFront","handleDragStart","handleDragEnd","deleteTileById","getTileStyle","draggable","getTileTitle","$emit","initResize","resizeXStartPos","resizeYStartPos","startTileHeight","startTileWidth","isResizing","props","type","Object","required","methods","left","this","x","top","y","width","height","zIndex","valueStickedToGrid","value","Math","round","event","preventDefault","clientX","clientY","window","addEventListener","handleResize","stopResize","deltaWidth","deltaHeight","newWidth","max","newHeight","removeEventListener","__exports__","components","Tile","topZIndex","nextId","currentTile","dragOffsetX","dragOffsetY","created","loadTiles","addNewItem","newItem","deleted","defaultTiles","getTradingDeskWidth","tradingDesk","$refs","offsetWidth","getTradingDeskHeight","offsetHeight","tile","saveTiles","map","tradingDeskWrapper","scrollLeft","scrollTop","savedTiles","localStorage","getItem","savedNextId","savedTopZIndex","Number","JSON","parse","setItem","stringify","toString","Workspace","render","tileIncrement","minTileWidth","minTileHeight","defaultWidth","defaultHeight","websocketURL","bitcoinValue","actionButtonNames","start","stop","reset"],"sourceRoot":""}